var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function i(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function f(){return h(" ")}function d(){return h("")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function b(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function v(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let _;function y(t){_=t}const x=[],w=[],C=[],k=[],L=Promise.resolve();let M=!1;function E(t){C.push(t)}let O=!1;const j=new Set;function B(){if(!O){O=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];y(e),N(e.$$)}for(x.length=0;w.length;)w.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];j.has(e)||(j.add(e),e())}C.length=0}while(x.length);for(;k.length;)k.pop()();M=!1,O=!1,j.clear()}}function N(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const A=new Set;let H;function D(){H={r:0,c:[],p:H}}function P(){H.r||o(H.c),H=H.p}function R(t,e){t&&t.i&&(A.delete(t),t.i(e))}function S(t,e,n,o){if(t&&t.o){if(A.has(t))return;A.add(t),H.c.push(()=>{A.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function T(t){t&&t.c()}function q(t,n,l){const{fragment:c,on_mount:s,on_destroy:u,after_update:a}=t.$$;c&&c.m(n,l),E(()=>{const n=s.map(e).filter(r);u?u.push(...n):o(n),t.$$.on_mount=[]}),a.forEach(E)}function G(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(x.push(t),M||(M=!0,L.then(B)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,r,l,c,s,a,i=[-1]){const h=_;y(e);const f=r.props||{},d=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:i,skip_bound:!1};let p=!1;if(d.ctx=l?l(e,f,(t,n,...o)=>{const r=o.length?o[0]:n;return d.ctx&&s(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),p&&W(e,t)),n}):[],d.update(),p=!0,o(d.before_update),d.fragment=!!c&&c(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(u)}else d.fragment&&d.fragment.c();r.intro&&R(e.$$.fragment),q(e,r.target,r.anchor),B()}y(h)}class F{$destroy(){G(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let I=(t,e)=>{let n=0,o=999999;return t.forEach(t=>{t.Deps.forEach(t=>{let r=e.get(t);r&&r.Hours.forEach(t=>{var e;e=t,o=Math.min(o,e),n=Math.max(n,e)})})}),t.forEach((t,r,l)=>{let c=new Map;t.Deps.forEach(t=>{let r=e.get(t),l=0,s=0,u=0,a=0;r&&(l=r.Hours.length,s=r.Hours.reduce((t,e)=>e+t-o,0),u=r.Committers,a=r.Authors),l<100&&(s+=(100-l)*(n-o)),s/=100;let i=(n-o)/100;s=100-Math.round(s/i);let h={health:s,committersCount:u,authorsCount:a};c.set(t,h)}),t.Repos=c,l.set(r,t)}),t};const J="All";let K=t=>{let e=[J];return t.forEach(t=>{!e.includes(t.Branch)&&t.Branch.length>0&&e.push(t.Branch)}),e},Q=t=>{let e=[J];return t.forEach(t=>{!e.includes(t.Oem)&&t.Oem.length>0&&e.push(t.Oem)}),e};function U(t){let e;return{c(){e=i("span"),e.textContent="Never",g(e,"class","badge badge-warning")},m(t,n){s(t,e,n)},d(t){t&&u(e)}}}function V(t){let e;return{c(){e=i("span"),e.textContent="Nightly",g(e,"class","badge badge-success")},m(t,n){s(t,e,n)},d(t){t&&u(e)}}}function X(t){let e;return{c(){e=i("span"),e.textContent="Weekly",g(e,"class","badge badge-success")},m(t,n){s(t,e,n)},d(t){t&&u(e)}}}function Y(t){let e;return{c(){e=i("span"),e.textContent="Monthly",g(e,"class","badge badge-success")},m(t,n){s(t,e,n)},d(t){t&&u(e)}}}function Z(e){let n;function o(t,e){return 1==t[0]?Y:2==t[0]?X:3==t[0]?V:U}let r=o(e),l=r(e);return{c(){l.c(),n=d()},m(t,e){l.m(t,e),s(t,n,e)},p(t,[e]){r!==(r=o(t))&&(l.d(1),l=r(t),l&&(l.c(),l.m(n.parentNode,n)))},i:t,o:t,d(t){l.d(t),t&&u(n)}}}function tt(t,e,n){let{period:o}=e;return t.$$set=t=>{"period"in t&&n(0,o=t.period)},[o]}class et extends F{constructor(t){super(),z(this,t,tt,Z,l,{period:0})}}function nt(t,e,n){const o=t.slice();return o[1]=e[n][0],o[2]=e[n][1],o}function ot(t){let e;return{c(){e=i("span"),e.textContent="Recovery",g(e,"class","badge badge-info")},m(t,n){s(t,e,n)},d(t){t&&u(e)}}}function rt(t){let e,n,o,r,l,a,d,p,b,v,_,y=t[2].authorsCount+"",x=t[2].committersCount+"";return{c(){e=i("a"),n=i("div"),o=i("div"),r=h(y),l=h(" ("),a=h(x),d=h(")"),v=f(),g(o,"class","progress-bar bg-success"),g(o,"role","progressbar"),$(o,"width",t[2].health+"%"),g(o,"aria-valuenow",p=t[2].health),g(o,"aria-valuemin","0"),g(o,"aria-valuemax","100"),g(n,"class","progress"),g(n,"title",b=t[1]+" ("+t[2].health+"%) "+t[2].authorsCount+" ("+t[2].committersCount+")"),g(e,"target","_blank"),g(e,"href",_="https://github.com/LineageOS/"+t[1])},m(t,u){s(t,e,u),c(e,n),c(n,o),c(o,r),c(o,l),c(o,a),c(o,d),c(e,v)},p(t,l){1&l&&y!==(y=t[2].authorsCount+"")&&m(r,y),1&l&&x!==(x=t[2].committersCount+"")&&m(a,x),1&l&&$(o,"width",t[2].health+"%"),1&l&&p!==(p=t[2].health)&&g(o,"aria-valuenow",p),1&l&&b!==(b=t[1]+" ("+t[2].health+"%) "+t[2].authorsCount+" ("+t[2].committersCount+")")&&g(n,"title",b),1&l&&_!==(_="https://github.com/LineageOS/"+t[1])&&g(e,"href",_)},d(t){t&&u(e)}}}function lt(t){let e,n,o,r,l,d,p,$,b,v,_,y,x,w,C,k,L,M,E,O,j,B,N,A,H,D=t[0].Model+"",P=t[0].Branch+"",W=t[0].Oem+"",z=t[0].Name+"";b=new et({props:{period:t[0].Period}});let F=t[0].lineage_recovery&&ot(),I=[...t[0].Repos],J=[];for(let e=0;e<I.length;e+=1)J[e]=rt(nt(t,I,e));return{c(){e=i("tr"),n=i("td"),o=i("a"),r=h(D),d=f(),p=i("td"),$=i("a"),T(b.$$.fragment),_=f(),F&&F.c(),y=f(),x=i("td"),w=h(P),C=f(),k=i("td"),L=h(W),M=f(),E=i("td"),O=h(z),j=f(),B=i("td");for(let t=0;t<J.length;t+=1)J[t].c();N=f(),A=i("td"),g(o,"target","_blank"),g(o,"href",l="https://wiki.lineageos.org/devices/"+t[0].Model),g($,"target","_blank"),g($,"href",v="https://download.lineageos.org/"+t[0].Model)},m(t,l){s(t,e,l),c(e,n),c(n,o),c(o,r),c(e,d),c(e,p),c(p,$),q(b,$,null),c(p,_),F&&F.m(p,null),c(e,y),c(e,x),c(x,w),c(e,C),c(e,k),c(k,L),c(e,M),c(e,E),c(E,O),c(e,j),c(e,B);for(let t=0;t<J.length;t+=1)J[t].m(B,null);c(e,N),c(e,A),H=!0},p(t,[e]){(!H||1&e)&&D!==(D=t[0].Model+"")&&m(r,D),(!H||1&e&&l!==(l="https://wiki.lineageos.org/devices/"+t[0].Model))&&g(o,"href",l);const n={};if(1&e&&(n.period=t[0].Period),b.$set(n),(!H||1&e&&v!==(v="https://download.lineageos.org/"+t[0].Model))&&g($,"href",v),t[0].lineage_recovery?F||(F=ot(),F.c(),F.m(p,null)):F&&(F.d(1),F=null),(!H||1&e)&&P!==(P=t[0].Branch+"")&&m(w,P),(!H||1&e)&&W!==(W=t[0].Oem+"")&&m(L,W),(!H||1&e)&&z!==(z=t[0].Name+"")&&m(O,z),1&e){let n;for(I=[...t[0].Repos],n=0;n<I.length;n+=1){const o=nt(t,I,n);J[n]?J[n].p(o,e):(J[n]=rt(o),J[n].c(),J[n].m(B,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=I.length}},i(t){H||(R(b.$$.fragment,t),H=!0)},o(t){S(b.$$.fragment,t),H=!1},d(t){t&&u(e),G(b),F&&F.d(),a(J,t)}}}function ct(t,e,n){let{dev:o}=e;return t.$$set=t=>{"dev"in t&&n(0,o=t.dev)},[o]}class st extends F{constructor(t){super(),z(this,t,ct,lt,l,{dev:0})}}function ut(t,e,n){const o=t.slice();return o[6]=e[n],o}function at(t,e,n){const o=t.slice();return o[9]=e[n],o}function it(t){let e,n,o,r=t[9]+"";return{c(){e=i("option"),n=h(r),e.__value=o=t[9],e.value=e.__value},m(t,o){s(t,e,o),c(e,n)},p(t,l){2&l&&r!==(r=t[9]+"")&&m(n,r),2&l&&o!==(o=t[9])&&(e.__value=o,e.value=e.__value)},d(t){t&&u(e)}}}function ht(t){let e,n,o,r=t[6]+"";return{c(){e=i("option"),n=h(r),e.__value=o=t[6],e.value=e.__value},m(t,o){s(t,e,o),c(e,n)},p(t,l){4&l&&r!==(r=t[6]+"")&&m(n,r),4&l&&o!==(o=t[6])&&(e.__value=o,e.value=e.__value)},d(t){t&&u(e)}}}function ft(e){let n,r,l,d,m,v,_,y,x,w,C,k,L,M,O,j,B,N,A,H,D,P=e[1],R=[];for(let t=0;t<P.length;t+=1)R[t]=it(at(e,P,t));let S=e[2],T=[];for(let t=0;t<S.length;t+=1)T[t]=ht(ut(e,S,t));return{c(){n=i("thead"),r=i("tr"),l=i("th"),l.textContent="Code",d=f(),m=i("th"),v=h("Build\n      "),_=i("input"),y=f(),x=i("th"),w=h("Branch\n      "),C=i("select");for(let t=0;t<R.length;t+=1)R[t].c();k=f(),L=i("th"),M=h("OEM\n      "),O=i("select");for(let t=0;t<T.length;t+=1)T[t].c();j=f(),B=i("th"),B.textContent="Model",N=f(),A=i("th"),A.textContent="Repos",g(l,"scope","col"),g(_,"type","checkbox"),g(m,"scope","col"),void 0===e[0].branch&&E(()=>e[4].call(C)),g(x,"scope","col"),void 0===e[0].oem&&E(()=>e[5].call(O)),g(L,"scope","col"),g(B,"scope","col"),$(A,"width","200px"),g(A,"scope","col")},m(t,o){s(t,n,o),c(n,r),c(r,l),c(r,d),c(r,m),c(m,v),c(m,_),_.checked=e[0].build,c(r,y),c(r,x),c(x,w),c(x,C);for(let t=0;t<R.length;t+=1)R[t].m(C,null);b(C,e[0].branch),c(r,k),c(r,L),c(L,M),c(L,O);for(let t=0;t<T.length;t+=1)T[t].m(O,null);b(O,e[0].oem),c(r,j),c(r,B),c(r,N),c(r,A),H||(D=[p(_,"change",e[3]),p(C,"change",e[4]),p(O,"change",e[5])],H=!0)},p(t,[e]){if(3&e&&(_.checked=t[0].build),2&e){let n;for(P=t[1],n=0;n<P.length;n+=1){const o=at(t,P,n);R[n]?R[n].p(o,e):(R[n]=it(o),R[n].c(),R[n].m(C,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=P.length}if(3&e&&b(C,t[0].branch),4&e){let n;for(S=t[2],n=0;n<S.length;n+=1){const o=ut(t,S,n);T[n]?T[n].p(o,e):(T[n]=ht(o),T[n].c(),T[n].m(O,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=S.length}3&e&&b(O,t[0].oem)},i:t,o:t,d(t){t&&u(n),a(R,t),a(T,t),H=!1,o(D)}}}function dt(t,e,n){let{value:o}=e,{branches:r}=e,{oems:l}=e;return t.$$set=t=>{"value"in t&&n(0,o=t.value),"branches"in t&&n(1,r=t.branches),"oems"in t&&n(2,l=t.oems)},[o,r,l,function(){o.build=this.checked,n(0,o),n(1,r)},function(){o.branch=v(this),n(0,o),n(1,r)},function(){o.oem=v(this),n(0,o),n(1,r)}]}class pt extends F{constructor(t){super(),z(this,t,dt,ft,l,{value:0,branches:1,oems:2})}}function gt(t,e,n){const o=t.slice();return o[7]=e[n][1],o}function mt(t){let e,n;return e=new st({props:{dev:t[7]}}),{c(){T(e.$$.fragment)},m(t,o){q(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.dev=t[7]),e.$set(o)},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function $t(t){let e,n,o,r,l,h;function d(e){t[5].call(null,e)}let p={branches:K(t[2]),oems:Q(t[2])};void 0!==t[1]&&(p.value=t[1]),n=new pt({props:p}),w.push(()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(n,"value",d));let m=[...t[0]],$=[];for(let e=0;e<m.length;e+=1)$[e]=mt(gt(t,m,e));const b=t=>S($[t],1,1,()=>{$[t]=null});return{c(){e=i("table"),T(n.$$.fragment),r=f(),l=i("tbody");for(let t=0;t<$.length;t+=1)$[t].c();g(e,"class","table table-dark")},m(t,o){s(t,e,o),q(n,e,null),c(e,r),c(e,l);for(let t=0;t<$.length;t+=1)$[t].m(l,null);h=!0},p(t,[e]){const r={};var c;if(!o&&2&e&&(o=!0,r.value=t[1],c=()=>o=!1,k.push(c)),n.$set(r),1&e){let n;for(m=[...t[0]],n=0;n<m.length;n+=1){const o=gt(t,m,n);$[n]?($[n].p(o,e),R($[n],1)):($[n]=mt(o),$[n].c(),R($[n],1),$[n].m(l,null))}for(D(),n=m.length;n<$.length;n+=1)b(n);P()}},i(t){if(!h){R(n.$$.fragment,t);for(let t=0;t<m.length;t+=1)R($[t]);h=!0}},o(t){S(n.$$.fragment,t),$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)S($[t]);h=!1},d(t){t&&u(e),G(n),a($,t)}}}function bt(t,e,n){let o,{deviceList:r}=e,{repoList:l}=e,c={build:!1,oem:J,branch:J};const s=(t=>{let e=new Map;for(let n of Object.keys(t)){let o=t[n];o.Deps.forEach((t,e,n)=>{n[e]=t.toLowerCase()}),e.set(n,o)}return e})(r),u=(t=>{let e=new Map,n=Date.now();for(let o of Object.keys(t)){let r=t[o],l={Authors:r.a,Committers:r.c,Hours:[]};for(let t in Object.keys(r.t)){let e=new Date(r.t[t]),o=Math.round((n-e.getTime())/36e5);l.Hours.push(o)}e.set(o.toLowerCase(),l),e=e}return e})(l);return console.log(s),console.log(u),t.$$set=t=>{"deviceList"in t&&n(3,r=t.deviceList),"repoList"in t&&n(4,l=t.repoList)},t.$$.update=()=>{2&t.$$.dirty&&n(0,o=I(((t,e)=>{let n=new Map;return t.forEach((t,o)=>{e.build&&0==t.Period||e.branch!=J&&t.Branch!=e.branch||e.oem!=J&&t.Oem!=e.oem||n.set(o,t)}),n})(s,c),u))},[o,c,s,r,l,function(t){c=t,n(1,c)}]}class vt extends F{constructor(t){super(),z(this,t,bt,$t,l,{deviceList:3,repoList:4})}}function _t(t,e,n){const o=t.slice();return o[8]=e[n],o}function yt(t){let e,n=t[4],o=[];for(let e=0;e<n.length;e+=1)o[e]=xt(_t(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=d()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);s(t,e,n)},p(t,r){if(16&r){let l;for(n=t[4],l=0;l<n.length;l+=1){const c=_t(t,n,l);o[l]?o[l].p(c,r):(o[l]=xt(c),o[l].c(),o[l].m(e.parentNode,e))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(t){a(o,t),t&&u(e)}}}function xt(t){let e,n,o=t[8]+"";return{c(){e=i("div"),n=h(o),g(e,"class","alert alert-danger"),g(e,"role","alert")},m(t,o){s(t,e,o),c(e,n)},p(t,e){16&e&&o!==(o=t[8]+"")&&m(n,o)},d(t){t&&u(e)}}}function wt(e){let n,o,r,l,a,d,m;return{c(){n=i("div"),o=i("button"),r=h("Load data"),l=f(),a=i("p"),a.textContent=""+Date(),o.disabled=e[2],g(o,"type","button"),g(o,"class","btn btn-primary"),g(n,"class","container")},m(t,u){s(t,n,u),c(n,o),c(o,r),c(n,l),c(n,a),d||(m=p(o,"click",e[5]),d=!0)},p(t,e){4&e&&(o.disabled=t[2])},i:t,o:t,d(t){t&&u(n),d=!1,m()}}}function Ct(t){let e,n;return e=new vt({props:{deviceList:t[0],repoList:t[1]}}),{c(){T(e.$$.fragment)},m(t,o){q(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.deviceList=t[0]),2&n&&(o.repoList=t[1]),e.$set(o)},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function kt(t){let e,n,o,r,l,a,h,d=t[4]&&yt(t);const p=[Ct,wt],g=[];function m(t,e){return t[3]?0:1}return o=m(t),r=g[o]=p[o](t),{c(){e=i("main"),d&&d.c(),n=f(),r.c(),l=f(),a=i("p"),a.innerHTML='<a target="_blank" href="https://github.com/mejgun/lineageos-devices-stats">GitHub</a>'},m(t,r){s(t,e,r),d&&d.m(e,null),c(e,n),g[o].m(e,null),c(e,l),c(e,a),h=!0},p(t,[c]){t[4]?d?d.p(t,c):(d=yt(t),d.c(),d.m(e,n)):d&&(d.d(1),d=null);let s=o;o=m(t),o===s?g[o].p(t,c):(D(),S(g[s],1,1,()=>{g[s]=null}),P(),r=g[o],r||(r=g[o]=p[o](t),r.c()),R(r,1),r.m(e,l))},i(t){h||(R(r),h=!0)},o(t){S(r),h=!1},d(t){t&&u(e),d&&d.d(),g[o].d()}}}function Lt(t,e,n){let o,r,l=!1,c=!1,s=[],u=()=>{fetch("/repos.json").then(t=>t.json().then(t=>{n(1,r=t),n(3,c=!0)}).catch(a)).catch(a)},a=t=>{s.push(t),n(4,s)};return[o,r,l,c,s,()=>{n(2,l=!0),fetch("/devices.json").then(t=>t.json().then(t=>{n(0,o=t),u()}).catch(a)).catch(a)}]}return new class extends F{constructor(t){super(),z(this,t,Lt,kt,l,{})}}({target:document.body,props:{name:"world"}})}();
